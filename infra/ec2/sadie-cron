# Sadie GTM Cron Jobs
# Install with: sudo cp sadie-cron /etc/cron.d/sadie-gtm
# Logs go to /var/log/sadie/

SHELL=/bin/bash
PATH=/usr/local/bin:/usr/bin:/bin:/home/ubuntu/.local/bin
HOME=/home/ubuntu
MAILTO=""

# Load environment variables and run enrichment jobs
# Format: minute hour day month weekday user command

# Enrichment: Room counts via Groq LLM (every 10 minutes)
*/10 * * * * ubuntu cd /home/ubuntu/sadie_gtm && source .env && /home/ubuntu/.local/bin/uv run python workflows/enrichment.py room_counts --limit 50 --no-notify >> /var/log/sadie/enrichment-room-count.log 2>&1

# Enrichment: Customer proximity via PostGIS (every 5 minutes)
*/5 * * * * ubuntu cd /home/ubuntu/sadie_gtm && source .env && /home/ubuntu/.local/bin/uv run python workflows/enrichment.py proximity --limit 100 --no-notify >> /var/log/sadie/enrichment-proximity.log 2>&1

# Launcher: Mark fully enriched hotels as live (every 5 minutes)
*/5 * * * * ubuntu cd /home/ubuntu/sadie_gtm && source .env && /home/ubuntu/.local/bin/uv run python workflows/launcher.py launch --limit 100 --no-notify >> /var/log/sadie/launcher.log 2>&1
